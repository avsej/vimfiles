set nocompatible

if (($term == "rxvt-unicode") || ($term =~ "xterm") || ($term =~ "screen")) && (&termencoding == "")
    set termencoding=utf-8
endif

if has('eval')
    let mapleader=","
end

if has("gui_running")
    colorscheme default
    set background=light
    set guicursor=a:blinkwait0,a:block-cursor
    set guifont=DejaVu\ Sans\ Mono\ 8
    set guioptions-=mtTlr
endif

if has("extra_search")
    "set hlsearch
    set incsearch
    set gdefault
end

if has("persistent_undo")
    set undodir=~/.vim/tmp/undo
    set undofile
endif

" tabs/spaces
set tabstop=4
set shiftwidth=4
set softtabstop=4
set expandtab

" abbreviations
inoreabbrev didnt didn't
inoreabbrev doesnt doesn't
inoreabbrev dont don't
inoreabbrev fro for
inoreabbrev Im I'm
inoreabbrev shoudl should
inoreabbrev teh the
inoreabbrev yuo you

" mappings
set pastetoggle=<f12>
set langmap=йq,цw,уe,кr,еt,нy,гu,шi,щo,зp,х[,ъ],фa,ыs,вd,аf,пg,рh,оj,лk,дl,ж\\;,э',яz,чx,сc,мv,иb,тn,ьm,б\\,,ю.,ё`,ЙQ,ЦW,УE,КR,ЕT,НY,ГU,ШI,ЩO,ЗP,Х{,Ъ},ФA,ЫS,ВD,АF,ПG,РH,ОJ,ЛK,ДL,Ж:,Э\\",ЯZ,ЧX,СC,МV,ИB,ТN,ЬM,Б<,Ю>,Ё~
vnoremap <down> <nop>
vnoremap < <gv
vnoremap > >gv
vmap <silent> j gj
vmap <silent> k gk
nmap <silent> j gj
nmap <silent> k gk

vnoremap <left> <nop>
vnoremap <right> <nop>
vnoremap <up> <nop>
inoremap <down> <esc>
inoremap <left> <esc>
inoremap <right> <esc>
inoremap <up> <esc>
inoremap kj <esc>
nnoremap <down> <nop>
nnoremap <left> <nop>
nnoremap <right> <nop>
nnoremap <up> <nop>
nnoremap Y y$
nnoremap <leader><space> :set hlsearch
nnoremap Q <nop>
inoremap <f1> <nop>
vnoremap <f1> <nop>
nnoremap <f1> <nop>
nnoremap <c-t> :NERDTreeToggle<cr>
"   inoremap () ()<left>
"   inoremap [] []<left>
"   inoremap '' ''<left>
"   inoremap "" ""<left>

let NERDTreeIgnore=['\.log$', '\~$', '\.out', '\.aux']

" formatting
set autoindent
set formatoptions=wrqn
set whichwrap+=<,>,[,]
set nowrap
set linebreak
set textwidth=72
set backspace=indent,eol,start
set comments=sr:/*,mb:\ *,el:*/,://,b:#,:%,:xcomm,n:>,n:),fb:-
" set number

" formats
set encoding=utf-8
set fileencodings=utf-8,japan,koi8-r,cp1251,cp866,iso-8859-15
set fileformat=unix
set printencoding=utf8

" display
set nofoldenable
set lazyredraw
set list
set listchars=tab:\ \ ,trail:·
set ruler
set rulerformat=%30(%=%y\ %c,%l\ %P%)
set scrolloff=0
set sidescrolloff=0
set showcmd
set shortmess=atT
set title
set winminheight=1
set noerrorbells
set splitbelow
set cpoptions=$
set wildignore=*.o,*.obj,*~,.svn,CVS,.git,.hg,*.a
set wildmenu
set wildmode=list:longest
set noshowmatch
highlight pmenu ctermbg=white
highlight pmenusel ctermfg=white ctermbg=black
highlight specialkey ctermfg=red

" system
set virtualedit=all
set modeline
set ttyfast
set autowrite
set printoptions=paper:a4,wrap:y,syntax:n,formfeed:y
set backupdir=~/.vim/tmp/backup
set directory=~/.vim/tmp/swap
set backup
set grepprg=grep\ -nHRI\ $*
set hidden
set history=128
set joinspaces
set sessionoptions=curdir,buffers
set shiftround
set viminfo=<1000,s100,'1000,f1,:1000,/1000,n~/.vim/.viminfo
set autoread

filetype on
filetype plugin on
filetype indent on
syntax enable

autocmd BufNewFile,BufRead *.ru,Rakefile,Gemfile,Capfile    set ft=ruby
autocmd BufNewFile,BufRead *.i    set ft=swig
autocmd BufNewFile,BufRead *.html   set ts=4 sw=4
autocmd FileType markdown           set tw=100 ts=2 sw=2 et wrap
autocmd FileType ruby,javascript    set sts=2 ts=2 sw=2 et nu
autocmd FileType tex                set sts=2 ts=2 sw=2 et wrap
autocmd FileType pod                set spell
autocmd FileType c,cpp              set ts=2 et sts=2 sw=2

   autocmd BufReadPost *
               \ if line("'\"") > 1 && line("'\"") <= line("$") |
               \   exe "normal! g`\"" |
               \ endif
autocmd BufNewFile * silent! 0r ~/.vim/skel/template.%:e
autocmd BufWritePre * :%s/\s\+$//e
let g:tex_no_error = 0
"let g:gist_private = 1

" vim:ft=vim:
